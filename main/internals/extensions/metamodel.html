
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>score_metamodel &#8212; Score Docs-as-Code  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/score.css?v=940e959b" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/score_needs.css?v=e97392eb" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/score_design.css?v=d9fd870c" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_style.css?v=92936fa5" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/need_links.css?v=2150a916" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-needs/modern.css?v=803738c0" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
    <script src="../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
    <script src="../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
    <script src="../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
    <script src="../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'internals/extensions/metamodel';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = 'https://nicu1989.github.io/docs-as-code/versions.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="File based rule checks" href="rst_filebased_testing.html" />
    <link rel="prev" title="Extensions" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.1" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">Eclipse S-CORE</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../how-to/index.html">
    How To
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Internals
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../requirements/index.html">
    Requirements
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
      
        <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../how-to/index.html">
    How To
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Internals
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../requirements/index.html">
    Requirements
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/eclipse-score" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
</ul></div>
        
          <div class="navbar-item">
<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-3"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-3"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-3"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-3">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html">Extensions</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Metamodel</a></li>
<li class="toctree-l2"><a class="reference internal" href="rst_filebased_testing.html">Filebased Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="header_service.html">Header Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="source_code_linker.html">Source Code Linker</a></li>
<li class="toctree-l2"><a class="reference internal" href="extension_guide.html">Extension Guide</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmark_results.html">Bazel Mini Benchmark Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../decisions_and_concepts/index.html">Decisions And Concepts</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Internals</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Extensions</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">score_metamodel</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="score-metamodel">
<span id="metamodel"></span><h1>score_metamodel<a class="headerlink" href="#score-metamodel" title="Link to this heading">#</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">score_metamodel</span></code> extension is a core extension/component of the Docs-As-Code.
It provides metamodel definitions, validation checks, and project layout management for Sphinx documentation.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>This extension serves multiple critical functions:</p>
<ul class="simple">
<li><p><strong>Metamodel Definition</strong>: Houses the project’s metamodel schema and configuration</p></li>
<li><p><strong>Validation System</strong>: Implements comprehensive checks to ensure documentation compliance</p></li>
<li><p><strong>External Needs Management</strong>: Imports external needs from dependencies</p></li>
<li><p><strong>Project Layout</strong>: Manages the rendering, look and feel of documentation</p></li>
<li><p><strong>Integration Testing</strong>: Provides RST-based tests to validate metamodel behavior</p></li>
</ul>
</section>
<section id="core-components">
<h2>Core Components<a class="headerlink" href="#core-components" title="Link to this heading">#</a></h2>
<section id="metamodel-definition">
<h3>Metamodel Definition<a class="headerlink" href="#metamodel-definition" title="Link to this heading">#</a></h3>
<p>The extension contains:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">metamodel.yaml</span></code>: The main metamodel definition</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">metamodel-schema.json</span></code>: JSON schema for validation</p></li>
<li><p>Setting configuration parameters based on input that get passed on to sphinx-needs</p></li>
</ul>
</section>
<section id="validation-system">
<h3>Validation System<a class="headerlink" href="#validation-system" title="Link to this heading">#</a></h3>
<p>The extension implements a multi-tier checking system:</p>
<p><strong>Local Checks</strong>: Validate individual needs using only their own data</p>
<ul class="simple">
<li><p>Run faster as they don’t require the full needs graph</p></li>
<li><p>Examples: ID format validation, prohibited words, attribute formatting</p></li>
</ul>
<p><strong>Graph-Based Checks</strong>: Validate needs in the context of their relationships</p>
<ul class="simple">
<li><p>Require access to the complete needs graph</p></li>
<li><p>Examples: Link validation, dependency checking, cross-reference verification</p></li>
</ul>
<p>This extension comes with Docs-As-Code.
Add <code class="docutils literal notranslate"><span class="pre">score_metamodel</span></code> to your extensions in <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="s1">&#39;score_metamodel&#39;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="creating-new-validation-checks">
<h2>Creating New Validation Checks<a class="headerlink" href="#creating-new-validation-checks" title="Link to this heading">#</a></h2>
<p>The extension automatically discovers checks from the <code class="docutils literal notranslate"><span class="pre">checks/</span></code> directory and the metamodel.yaml config. There are several types of checks you can implement:</p>
<section id="need-local-checks-configuration-based">
<h3>1. Need-Local Checks (Configuration-Based)<a class="headerlink" href="#need-local-checks-configuration-based" title="Link to this heading">#</a></h3>
<p>These checks validate individual needs using regex patterns. They’re defined in <code class="docutils literal notranslate"><span class="pre">metamodel.yaml</span></code> and are the easiest to create.</p>
<p>All definitions are parsed as regex and evaluated as such, keep that in mind.
They can be found inside the metamodel.yml and are how we define needs. See an example here:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">needs_types</span><span class="p">:</span>
<span class="w">  </span><span class="nt">gd_req</span><span class="p">:</span>
<span class="w">    </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Process Requirements</span>
<span class="w">    </span><span class="nt">prefix</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gd_req__</span>
<span class="w">    </span><span class="c1"># All options&amp;links defined below are checked if they follow the defined regex in the need itself</span>
<span class="w">    </span><span class="nt">mandatory_options</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^gd_req__[0-9a-z_]*$</span>
<span class="w">      </span><span class="nt">status</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^(valid|draft)$</span>
<span class="w">      </span><span class="nt">content</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^[\s\S]+$</span><span class="w"> </span><span class="c1"># multiline non empty matching</span>
<span class="w">    </span><span class="nt">optional_links</span><span class="p">:</span>
<span class="w">      </span><span class="nt">satisfies</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^wf__.*$</span>
<span class="w">      </span><span class="nt">complies</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">^std_req__(iso26262|isosae21434|isopas8926|aspice_40)__.*$</span><span class="w"> </span><span class="c1">#can only be one of these</span>
<span class="w">    </span><span class="nt">tags</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">requirement</span><span class="w"> </span><span class="c1"># grouping of similar needs together in order to make some other checks easier to write</span>
<span class="w">    </span><span class="nt">parts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"> </span><span class="c1"># has to have exactly one `__` inside the ID</span>
</pre></div>
</div>
</section>
<section id="generic-graph-checks-configuration-based">
<h3>2. Generic Graph Checks (Configuration-Based)<a class="headerlink" href="#generic-graph-checks-configuration-based" title="Link to this heading">#</a></h3>
<p>Generic graph checks are defined in the metamodel.yaml under <code class="docutils literal notranslate"><span class="pre">graph_checks</span></code>.
These checks all follow the same structure:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;name of the check&gt;</span><span class="p">:</span>
<span class="w">  </span><span class="nt">needs</span><span class="p">:</span>
<span class="w">    </span><span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;need1&gt;, &lt;need2&gt;</span><span class="w"> </span><span class="c1">#list of your needs </span>
<span class="w">    </span><span class="nt">condition</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;your condition(s) that need to be fulfilled&gt;</span>
<span class="w">  </span><span class="nt">check</span><span class="p">:</span>
<span class="w">    </span><span class="nt">&lt;link attribute to check&gt;</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;condition to be checked in each need inside the link attribute&gt;</span>
<span class="w">  </span><span class="nt">explanation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;A short sentence that explains what is required to be adhered to. This will be</span><span class="w"> </span>
<span class="w">              </span><span class="l l-Scalar l-Scalar-Plain">&lt; part of the error message if the check fails&gt;</span>
</pre></div>
</div>
<blockquote>
<div><p><em>Note:</em> You can also use multiple conditions or negate conditions in either the needs or check part.</p>
</div></blockquote>
<p>A complete example might look like so:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">graph_checks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">tool_req__docs_req_arch_link_safety_to_arch</span><span class="p">:</span>
<span class="w">    </span><span class="nt">needs</span><span class="p">:</span>
<span class="w">      </span><span class="nt">include</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feat_arc_sta, logic_arc_int, logic_arc_int_op, comp_arc_sta, real_arc_int, real_arc_int_op</span>
<span class="w">      </span><span class="nt">condition</span><span class="p">:</span>
<span class="w">        </span><span class="nt">and</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">safety != QM</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">status == valid</span>
<span class="w">    </span><span class="nt">check</span><span class="p">:</span>
<span class="w">      </span><span class="nt">implements</span><span class="p">:</span><span class="w"> </span>
<span class="w">        </span><span class="nt">and</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">safety != QM</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">status == valid</span>
<span class="w">    </span><span class="nt">explanation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">An safety architecture element can only link other safety architecture elements.</span>
</pre></div>
</div>
<p>What does this check do?
This check will go through each of the needs mentioned in ‘include’ that match the condition, and then for every single one of them check the needs that are linked inside the ‘implements’ attribute. Go inside those needs and check if they also fulfill the condition described.
If one of them does not fulfill the condition the check fails and will let you know with a warning that it did so.</p>
</section>
<section id="prohibited-word-checks-configuration-based">
<h3>3. Prohibited Word Checks (Configuration-Based)<a class="headerlink" href="#prohibited-word-checks-configuration-based" title="Link to this heading">#</a></h3>
<p>For preventing specific words for specific needs in certain attributes.
This is also defined in metamodel and follows the following schema:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">prohibited_words_checks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">&lt;check name&gt;</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">types[OPTIONAL]</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="c1"># If you skip this, all needs will be checked.</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt; you can specify here that only needs with this tag will get checked for this check&gt;</span>
<span class="w">    </span><span class="nt">&lt;attribute to check&gt;</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt; word to forbid &gt;</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt; word to forbid &gt;</span>
</pre></div>
</div>
<p>An example might look like this:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">prohibited_words_checks</span><span class="p">:</span>
<span class="w">  </span><span class="nt">content_check</span><span class="p">:</span>
<span class="w">    </span><span class="nt">types</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">requirement_excl_process</span>
<span class="w">    </span><span class="nt">content</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">just</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">about</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">really</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">some</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">thing</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">absolutely</span>
</pre></div>
</div>
<p>For all needs that have the <code class="docutils literal notranslate"><span class="pre">tag</span></code> ‘requirement_excl_process’ <strong>inside the metamodel.yaml</strong> this check will now verify that the <code class="docutils literal notranslate"><span class="pre">content</span></code> or the <code class="docutils literal notranslate"><span class="pre">description</span></code> does not contain any of the mentioned words in the list.</p>
</section>
<section id="custom-local-checks-python-code">
<h3>4. Custom Local Checks (Python Code)<a class="headerlink" href="#custom-local-checks-python-code" title="Link to this heading">#</a></h3>
<p>If you need something that the generic local or graph checks can not fulfill, then you can also add a custom check.
Ensure this check is inside a python file that is placed in the <code class="docutils literal notranslate"><span class="pre">check</span></code> folder in this extension.
Do not forget to add the applicable decorator to the function.</p>
<p>This means all validations can be done with only the information in this need itself, and you do not need access to any of the linked needs or other needs inside the documentation.</p>
<p>Your function will receive the Sphinx <code class="docutils literal notranslate"><span class="pre">app</span></code>, the current <code class="docutils literal notranslate"><span class="pre">need</span></code> to check and a <code class="docutils literal notranslate"><span class="pre">log</span></code> to log messages.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">score_metamodel.checks</span><span class="w"> </span><span class="kn">import</span> <span class="n">local_check</span>

<span class="nd">@local_check</span>
<span class="k">def</span><span class="w"> </span><span class="nf">my_local_check</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">need</span><span class="p">,</span> <span class="n">log</span><span class="p">):</span>
    <span class="c1"># Validate individual need properties</span>
    <span class="c1"># Example: If option_a == &#39;2&#39; then option_b is required to be not empty</span>
    <span class="k">pass</span>
</pre></div>
</div>
<blockquote>
<div><p>Check existing files in the <code class="docutils literal notranslate"><span class="pre">checks/</span></code> folder for real examples.</p>
</div></blockquote>
</section>
<section id="custom-graph-checks-python-code">
<h3>5. Custom Graph Checks (Python Code)<a class="headerlink" href="#custom-graph-checks-python-code" title="Link to this heading">#</a></h3>
<p>These checks need to access linked needs in order to fully verify the specified behavior.
The signature is similar to that of local_check, but instead of one need you will get <code class="docutils literal notranslate"><span class="pre">all_needs</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">score_metamodel.checks</span><span class="w"> </span><span class="kn">import</span> <span class="n">graph_check</span>

<span class="nd">@graph_check</span>
<span class="k">def</span><span class="w"> </span><span class="nf">my_custom_graph_check</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">all_needs</span><span class="p">,</span> <span class="n">log</span><span class="p">):</span>
    <span class="c1"># Complex validation with full graph access</span>
    <span class="c1"># Example: if option_a == &#39;2&#39; then each linked requirement needs to also have option_a == &#39;2&#39;</span>
    <span class="k">pass</span>
</pre></div>
</div>
<blockquote>
<div><p>Check existing files in the <code class="docutils literal notranslate"><span class="pre">checks/</span></code> folder for real examples.</p>
</div></blockquote>
</section>
</section>
<section id="file-structure-reference">
<h2>File Structure Reference<a class="headerlink" href="#file-structure-reference" title="Link to this heading">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>score_metamodel/
├── BUILD
├── __init__.py
├── checks
│   ├── __init__.py
│   ├── attributes_format.py
│   ├── check_options.py
│   ├── graph_checks.py
│   ├── id_contains_feature.py
│   └── standards.py
├── external_needs.py
├── log.py
├── metamodel-schema.json
├── metamodel.yaml
└── tests
    ├── __init__.py
    ├── rst
    │   ├── attributes
    │   │   └── ... 
    │   ├── conf.py
    │   ├── graph
    │   │   └── test_metamodel_graph.rst
    │   ├── id_contains_feature
    │   │   └── test_id_contains_feature.rst
    │   └── options
    │       └── test_options_options.rst
    └── ...
</pre></div>
</div>
</section>
<section id="testing-your-changes">
<h2>Testing Your Changes<a class="headerlink" href="#testing-your-changes" title="Link to this heading">#</a></h2>
<p>The extension is setup for comprehensive testing:</p>
<p>To add tests for new checks:</p>
<ul class="simple">
<li><p><strong>Unit Tests</strong>: Test individual additions, if they are not covered by the present unit-tests</p></li>
<li><p><strong>Integration Tests</strong>: Add RST-based tests in <code class="docutils literal notranslate"><span class="pre">tests/rst/</span></code> that validate the metamodel in realistic scenarios. Make sure to have at least one good and one bad case.</p></li>
</ul>
<ol class="arabic simple">
<li><p>Add unit tests in the appropriate <code class="docutils literal notranslate"><span class="pre">test_*.py</span></code> file</p></li>
<li><p>Create RST integration tests in <code class="docutils literal notranslate"><span class="pre">tests/rst/</span></code> to verify behavior in Sphinx. Ensure thematically it’s in the right folder</p></li>
</ol>
</section>
<section id="architecture-decision-local-vs-graph-based-checks">
<h2>Architecture Decision: Local vs Graph-Based Checks<a class="headerlink" href="#architecture-decision-local-vs-graph-based-checks" title="Link to this heading">#</a></h2>
<p>While sphinx-needs provides a powerful warning mechanism, it’s limited to need-local checks. This extension implements a custom multi-tier system because:</p>
<ul class="simple">
<li><p><strong>Performance</strong>: Local checks run faster and can provide immediate feedback</p></li>
<li><p><strong>Flexibility</strong>: Graph-based checks enable complex relationship validation</p></li>
<li><p><strong>Control</strong>: Custom implementation allows for more elaborate validation logic</p></li>
<li><p><strong>Future-proofing</strong>: Provides foundation for advanced validation features</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Extensions</p>
      </div>
    </a>
    <a class="right-next"
       href="rst_filebased_testing.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">File based rule checks</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#core-components">Core Components</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#metamodel-definition">Metamodel Definition</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#validation-system">Validation System</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-new-validation-checks">Creating New Validation Checks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#need-local-checks-configuration-based">1. Need-Local Checks (Configuration-Based)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#generic-graph-checks-configuration-based">2. Generic Graph Checks (Configuration-Based)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#prohibited-word-checks-configuration-based">3. Prohibited Word Checks (Configuration-Based)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-local-checks-python-code">4. Custom Local Checks (Python Code)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#custom-graph-checks-python-code">5. Custom Graph Checks (Python Code)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-structure-reference">File Structure Reference</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-your-changes">Testing Your Changes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#architecture-decision-local-vs-graph-based-checks">Architecture Decision: Local vs Graph-Based Checks</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  
  <div class="tocsection editthispage">
    <a href="https://github.com/nicu1989/docs-as-code/edit/main/docs/internals/extensions/metamodel.md">
      <i class="fa-solid fa-pencil"></i>
      
      
        
          Edit on GitHub
        
      
    </a>
  </div>
</div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/internals/extensions/metamodel.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>